<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script>
        /*
         *
         */
        // 예제 JSON
        // {
        //     "userId": 1,
        //     "id": 1,
        //     "title": "delectus aut autem",
        //     "completed": false
        // }

        document.addEventListener('DOMContentLoaded', () => {
            // ajax 를 이용해서 데이터를 가져오기 <-- 새로고침없이 데이터를 가져오기 #todo 추후 댓글 기능 구현에 쓸 예정
            // XMLHttpRequest 객체 생성 <-- const 로 해도 됨 주소값은 안변하기 때문
            const xhr = new XMLHttpRequest();

            // HTTP 요청 초기화. 통신방식과 URL 을 설정
            xhr.open('GET', 'https://jsonplaceholder.typicode.com/todos/1');

            // 요청 성공하면 200 , 404는 실패(요청한 리소스를 찾지 못함)
            // 이벤트 등록. XMLHttpRequest 객체의 readyState 프로퍼티 값이 변할 때마다 자동으로 호출됨
            xhr.onreadystatechange = () => {
                // 완료되지 않았다면 return
                // readyState 프로퍼티의 값이 DONE : 요청한 데이터의 처리가 완료되어 응답할 준비가 완료됨.
                if (xhr.readyState !== XMLHttpRequest.DONE) return;

                // 완료가 되면 실행될 코드
                if (xhr.status === 200) { // 서버(url)에 문서가 존재함
                    console.log(JSON.parse(xhr.response));

                    const obj = (JSON.parse(xhr.response));
                    console.log(obj.title);
                } else {
                    console.error('Error', xhr.status, xhr.statusText);
                }
            } // <-- xhr의 이벤트에 콜백함수 등록
            xhr.send(); // url 에 요청을 보냄. <-- 실제 데이터를 요청하는 부분

        });

    </script>
</head>
<body>

</body>
</html>
